<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"></script>
	<style>
		ul,li{
			list-style: none;
			margin: 0;
			padding: 0;
		}
		.container{
			width: 520px;
			margin: 0 auto;
		}
		.container img{
			width: 250px;
		}
		.container li{
			width: 250px;
			float: left;
			margin-left: 20px;
		}
		.container ul{
			margin-left: -20px;
		}
		.container ul:after{
			content: "";
			display: block;
			clear: both;
		}

	</style>
</head>
<body>
	<div class="container">
		<ul>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg" alt=""></a></li>
			<li><a href=""><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-scr="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg" alt=""></a></li>
		</ul>
	</div>
	<script>
		$('img').data('isLoaded',false);
		var clock;
		lazyRender();
		$(window).on('scroll',function(){
			if(clock){
				clearTimeout(clock)
			}
			clock = setTimeout(function(){
				console.log('hello')
				lazyRender()
			},300)
		})
		function lazyRender(){
			$('.container img').each(function(){
				if(isVisible($(this)) && !$(this).data('isLoaded')){
					loadImg($(this))
				}
			})
		}
		function isVisible($img){
			if($(window).scrollTop() + $(window).height() >= $img.offset().top && $img.offset().top >= $(window).scrollTop()){
				return true
			}
			return false
		}
		function loadImg($img){
			$img.attr('src',$img.attr('data-scr'))
			    .data('isLoaded',true)

		}


		/*题目1：如何判断一个元素是否出现在窗口可视范围（浏览器的上边缘和下边缘之间，肉眼可视）。写一个函数 isVisible实现
		function isVisible($node){
			if($(window).scrollTop() + $(window).height() >= $node.offset().top && $node.offset().top >= $(window).scrollTop()){
				return true
			}
			return false
		}
		题目2：当窗口滚动时，判断一个元素是不是出现在窗口可视范围。每次出现都在控制台打印 true 。用代码实现
		$(window).on("scroll",function(){
			if(isVisible($node)){
				console.log(true)
			}
		})
		题目3：当窗口滚动时，判断一个元素是不是出现在窗口可视范围。在元素第一次出现时在控制台打印 true，以后再次出现不做任何处理。用代码实现
		$node.data('isAppear',false)
		$(window).on("scroll",function(){
			if(isVisible($node) && !$node.data('isAppear')){
				console.log(true)
				$node.data('isAppear',true)
			}
		})
		*/
	</script>
</body>
</html>